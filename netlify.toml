############################################
# Build configuration
############################################
[build]
  base = "."
  command = "npm run build"
  publish = "dist"


############################################
# Redirects (path-only, safe)
############################################

# Enforce trailing slashes for legal pages
[[redirects]]
  from = "/privacy-policy"
  to = "/privacy-policy/"
  status = 301

[[redirects]]
  from = "/terms-of-service"
  to = "/terms-of-service/"
  status = 301

[[redirects]]
  from = "/disclaimer"
  to = "/disclaimer/"
  status = 301


############################################
# Security headers (FREE tier safe)
############################################

# Default headers for all responses
[[headers]]
  for = "/*"
  [headers.values]
    # Prevent MIME sniffing
    X-Content-Type-Options = "nosniff"

    # Prevent clickjacking
    X-Frame-Options = "SAMEORIGIN"

    # Limit referrer leakage
    Referrer-Policy = "strict-origin-when-cross-origin"

    # Disable unused browser capabilities
    Permissions-Policy = "geolocation=(), microphone=(), camera=()"

    # Conservative HSTS (safe during early production)
    # Increase later once site is fully stable
    Strict-Transport-Security = "max-age=86400"


############################################
# Performance: long-term caching for assets
############################################

# Cache immutable build assets aggressively
[[headers]]
  for = "/assets/*"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"


############################################
# Netlify Forms (no config needed here)
############################################
# - Honeypot handled in HTML
# - Email notifications configured in Netlify Dashboard
#
# Suggested recipients:
#   WAELAMER@AMERLAWLLC.COM
#   mjamilamer@gmail.com
#
# Suggested subject templates:
#   "New Contact: {{name}} - {{practice-area}}"
#   "Contact Form: {{name}} ({{email}})"
#   "{{practice-area}} Inquiry from {{name}}"
#
# Fallback subject:
#   "New Contact Form Submission from Amer Law Website"
############################################
